<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NYC Public Service Finder</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link href="{% static 'css/styles.css' %}" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the slider thumb */
        input[type=range]::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            background: #3B82F6; /* Tailwind's blue-500 */
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 0 2px rgba(0,0,0,0.5);
        }

        input[type=range]:focus::-webkit-slider-thumb {
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
        }

        input[type=range]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: #3B82F6;
            cursor: pointer;
            border-radius: 50%;
            border: none;
        }

        /* Fixed width for radius value to prevent layout shift */
        #radiusValue {
            width: 50px; /* Increased width to accommodate double digits */
            text-align: center;
        }

        /* Ensure the slider doesn't exceed its container's height */
        .slider {
            height: 2px;
            margin: 0;
        }

        /* Detailed View Styles */
        #serviceDetails {
            display: none; /* Hidden by default */
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col min-h-screen">
    <nav class="bg-white shadow-md p-4">
        <div class="container mx-auto flex justify-between items-center">
            <span class="text-lg font-semibold">NYC Public Service Finder</span>
            <div>
                {% if user.is_authenticated %}
                    <form method="post" action="{% url 'logout' %}">
                        {% csrf_token %}
                        <button type="submit" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">Logout</button>
                    </form>
                {% endif %}
            </div>
        </div>
    </nav>

    <header class="bg-blue-500 text-white p-6">
        <div class="container mx-auto">
            <form method="get" action="" class="flex flex-wrap items-start gap-6">
                <!-- Search by Name -->
                <div class="flex flex-col w-full sm:w-auto flex-grow">
                    <label for="search" class="mb-1 text-sm font-medium">Search by Name</label>
                    <input type="text" id="search" name="search" placeholder="Search by Name" value="{{ search_query }}" class="w-full p-2 rounded bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-300 h-12">
                </div>

                <!-- Location Input -->
                <div class="flex flex-col w-full sm:w-auto">
                    <label for="location" class="mb-1 text-sm font-medium">Location</label>
                    <input type="text" id="location" name="location" placeholder="Enter Location" class="w-full p-2 rounded bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-300 h-12">
                </div>

                <!-- Category Selection -->
                <div class="flex flex-col w-full sm:w-auto">
                    <label for="category" class="mb-1 text-sm font-medium">Category</label>
                    <select id="category" name="category" class="w-full p-2 rounded bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-300 h-12">
                        <option value="all categories" selected>All Categories</option>
                        <option value="homeless">Homeless Services</option>
                        <option value="food">Food Banks</option>
                        <option value="health">Mental Health Services</option>
                        <option value="restroom">Public Restrooms</option>
                    </select>
                </div>

                <!-- Radius Selection -->
                <div class="flex flex-col w-full sm:w-auto">
                    <label for="radius" class="mb-1 text-sm font-medium">Radius</label>
                    <div class="flex items-center bg-white p-2 rounded h-12">
                        <span class="text-gray-800 mr-2">Radius:</span>
                        <input type="range" id="radius" name="radius" min="1" max="20" value="5" class="flex-grow slider bg-gray-300 rounded-lg">
                        <span id="radiusValue" class="ml-2 text-gray-800">5 miles</span>
                    </div>
                </div>

                <!-- Apply Filters Button -->
                <div class="flex flex-col w-full sm:w-auto">
                    <label class="mb-1 text-sm font-medium invisible">Apply</label> <!-- Invisible label for alignment -->
                    <button type="submit" class="w-full sm:w-auto bg-white text-blue-500 px-4 py-2 rounded hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-300 h-12">Apply Filters</button>
                </div>
            </form>
        </div>
    </header>

    <main class="container mx-auto my-8 flex-grow">
        <div class="flex flex-col lg:flex-row gap-8">
            <div class="lg:w-2/3">
                <div id="map" class="h-96 rounded-lg shadow-md mb-8"></div>

                <!-- Detailed View Component -->
                <div id="serviceDetails" class="bg-white rounded-lg shadow-md p-4 mb-8">
                    <div class="flex justify-between items-start mb-4">
                        <h2 id="serviceName" class="text-lg font-semibold">Service Name</h2>
                        <button id="closeDetails" class="text-gray-500 hover:text-gray-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                    <div class="space-y-1 mb-4">
                        <p class="text-sm"><strong>Address:</strong> <span id="serviceAddress">123 Main St</span></p>
                        <p class="text-sm"><strong>Type:</strong> <span id="serviceType">Homeless</span></p>
                        <p class="text-sm"><strong>Rating:</strong> <span id="serviceRating">4.5</span></p>
                        <p class="text-sm"><strong>Distance:</strong> <span id="serviceDistance">1.2 miles</span></p>
                        <p class="text-sm mt-2" id="serviceDescription">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                        <!-- Get Directions Button -->
                        <a id="getDirections" href="#" target="_blank" rel="noopener noreferrer" class="inline-block bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mt-2">Get Directions</a>
                    </div>
                    <h3 class="text-lg font-semibold mb-2">Leave a Review</h3>
                    <div class="space-y-2 mb-4">
                        <select id="reviewRating" class="w-full p-2 border rounded">
                            <option>Select a rating</option>
                            <option>1 Star</option>
                            <option>2 Stars</option>
                            <option>3 Stars</option>
                            <option>4 Stars</option>
                            <option>5 Stars</option>
                        </select>
                        <textarea id="reviewText" class="w-full p-2 border rounded" placeholder="Write your review here..."></textarea>
                        <button id="submitReview" class="bg-blue-500 text-white px-4 py-2 rounded">Submit Review</button>
                    </div>
                    <h3 class="text-lg font-semibold mb-2">Reviews</h3>
                    <div class="mb-2">
                        <select id="sortReviews" class="w-full p-2 border rounded">
                            <option>Sort reviews by</option>
                            <option>Date</option>
                            <option>Rating</option>
                        </select>
                    </div>
                    <div id="reviewsContainer" class="h-64 overflow-y-auto">
                        <!-- Reviews will be dynamically inserted here -->
                        <div class="bg-white rounded-lg shadow p-2 mb-2">
                            <div class="flex justify-between items-start">
                                <div>
                                    <div class="flex items-center">
                                        <!-- Star Icons -->
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                        </svg>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                        </svg>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                        </svg>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                        </svg>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                        </svg>
                                    </div>
                                    <p class="text-sm">Great service and friendly staff!</p>
                                </div>
                                <div class="text-right text-sm text-gray-500">
                                    <div class="flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                        </svg>
                                        2023-06-15
                                    </div>
                                    <div class="flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5" />
                                        </svg>
                                        12
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- More review items would go here -->
                    </div>
                </div>
            </div>
            <div class="lg:w-1/3">
                <div class="bg-white rounded-lg shadow-md p-4">
                    <!-- Updated Section: Sort Dropdown Moved Below Title -->
                    <div class="mb-4">
                        <h2 class="text-lg font-semibold mb-2">Public Services Near You</h2>
                        <select class="w-full p-2 border rounded text-sm bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-300">
                            <option>Sort by Distance</option>
                            <option>Sort by Rating</option>
                        </select>
                    </div>
                    
                    <div class="space-y-2 max-h-96 overflow-y-auto mb-4">
                        {% for item in page_obj %}
                            <button class="service-button w-full text-left p-2 hover:bg-gray-100 rounded" data-id="{{ forloop.counter0 }}">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <div class="font-medium">{{ item.Name }}</div>
                                        <div class="text-sm text-gray-600">{{ item.Address }}</div>
                                    </div>
                                    <div class="flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-yellow-400 mr-1" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                                        </svg>
                                        <span>{{ item.Ratings|default:"N/A" }}</span>
                                    </div>
                                </div>
                            </button>
                        {% endfor %}
                    </div>
                    
                    <!-- Updated Section: Pagination Layout -->
                    <div class="space-y-2">
                        <!-- Page Numbers on Top -->
                        <div class="flex justify-center flex-wrap space-x-1">
                            {% for num in page_obj.paginator.page_range %}
                                {% if num == page_obj.number %}
                                    <span class="bg-blue-600 text-white px-3 py-1 rounded text-sm">{{ num }}</span>
                                {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                                    <a href="?page={{ num }}{% if search_query %}&search={{ search_query }}{% endif %}" class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">{{ num }}</a>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <!-- Navigation Buttons Below -->
                        <div class="flex justify-center space-x-2">
                            {% if page_obj.has_previous %}
                                <a href="?page=1{% if search_query %}&search={{ search_query }}{% endif %}" class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">First</a>
                                <a href="?page={{ page_obj.previous_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}" class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">Previous</a>
                            {% endif %}
                            
                            {% if page_obj.has_next %}
                                <a href="?page={{ page_obj.next_page_number }}{% if search_query %}&search={{ search_query }}{% endif %}" class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">Next</a>
                                <a href="?page={{ page_obj.paginator.num_pages }}{% if search_query %}&search={{ search_query }}{% endif %}" class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">Last</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-gray-800 text-white py-4 mt-8">
        <div class="container mx-auto text-center">
            <p>&copy; 2023 NYC Public Service Finder. All rights reserved.</p>
        </div>
    </footer>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        const itemsData = {{ serialized_items|safe }};
        const map = L.map('map').setView([40.7128, -74.0060], 12);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
        }).addTo(map);

        const markers = [];
        itemsData.forEach((item, index) => {
            if (item.Lat && item.Log) {
                const marker = L.marker([item.Lat, item.Log])
                    .addTo(map)
                    .bindPopup(`<b>${item.Name}</b><br>${item.Address}<br>Rating: ${item.Ratings}`)
                    .on('click', () => {
                        showServiceDetails(index);
                    });
                markers.push(marker);
            }
        });

        if (markers.length > 0) {
            const group = L.featureGroup(markers);
            map.fitBounds(group.getBounds());
        } else {
            map.setView([40.7128, -74.0060], 10);
        }

        // Update radius value display
        const radiusInput = document.getElementById('radius');
        const radiusValue = document.getElementById('radiusValue');
        radiusInput.addEventListener('input', function() {
            radiusValue.textContent = this.value + ' miles';
        });

        // Function to show service details
        function showServiceDetails(index) {
            const service = itemsData[index];
            document.getElementById('serviceName').textContent = service.Name || 'No Name';
            document.getElementById('serviceAddress').textContent = service.Address || 'N/A';
            document.getElementById('serviceType').textContent = service.Category || 'Unknown';
            document.getElementById('serviceRating').textContent = service.Ratings || 'N/A';
            document.getElementById('serviceDistance').textContent = service.Distance ? service.Distance + ' miles' : 'N/A';
            document.getElementById('serviceDescription').textContent = service.Description || 'No description available.';

            // Set the Get Directions button link
            const getDirectionsBtn = document.getElementById('getDirections');
            if (service.MapLink) {
                getDirectionsBtn.href = service.MapLink;
                getDirectionsBtn.style.display = 'inline-block'; // Ensure the button is visible
            } else {
                getDirectionsBtn.href = '#';
                getDirectionsBtn.style.display = 'none'; // Hide the button if no MapLink
            }

            // Populate reviews
            const reviewsContainer = document.getElementById('reviewsContainer');
            reviewsContainer.innerHTML = ''; // Clear existing reviews
            if (service.Reviews && service.Reviews.length > 0) {
                service.Reviews.forEach(review => {
                    const reviewDiv = document.createElement('div');
                    reviewDiv.classList.add('bg-white', 'rounded-lg', 'shadow', 'p-2', 'mb-2');

                    // Review Content
                    const contentDiv = document.createElement('div');
                    contentDiv.classList.add('flex', 'justify-between', 'items-start');

                    // Review Text and Rating
                    const textDiv = document.createElement('div');
                    const starsDiv = document.createElement('div');
                    starsDiv.classList.add('flex', 'items-center');

                    for(let i=0; i < review.rating; i++) {
                        const star = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                        star.setAttribute("xmlns", "http://www.w3.org/2000/svg");
                        star.setAttribute("class", "h-4 w-4 text-yellow-400");
                        star.setAttribute("viewBox", "0 0 20 20");
                        star.setAttribute("fill", "currentColor");
                        const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                        path.setAttribute("d", "M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z");
                        star.appendChild(path);
                        starsDiv.appendChild(star);
                    }

                    const reviewText = document.createElement('p');
                    reviewText.classList.add('text-sm');
                    reviewText.textContent = review.text || 'No review text provided.';

                    textDiv.appendChild(starsDiv);
                    textDiv.appendChild(reviewText);

                    // Review Meta
                    const metaDiv = document.createElement('div');
                    metaDiv.classList.add('text-right', 'text-sm', 'text-gray-500');

                    const dateDiv = document.createElement('div');
                    dateDiv.classList.add('flex', 'items-center');
                    const dateIcon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                    dateIcon.setAttribute("xmlns", "http://www.w3.org/2000/svg");
                    dateIcon.setAttribute("class", "h-4 w-4 mr-1");
                    dateIcon.setAttribute("fill", "none");
                    dateIcon.setAttribute("viewBox", "0 0 24 24");
                    dateIcon.setAttribute("stroke", "currentColor");
                    const datePath = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    datePath.setAttribute("stroke-linecap", "round");
                    datePath.setAttribute("stroke-linejoin", "round");
                    datePath.setAttribute("stroke-width", "2");
                    datePath.setAttribute("d", "M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z");
                    dateIcon.appendChild(datePath);
                    dateDiv.appendChild(dateIcon);
                    dateDiv.appendChild(document.createTextNode(review.date || 'N/A'));

                    const likesDiv = document.createElement('div');
                    likesDiv.classList.add('flex', 'items-center');
                    const likeIcon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                    likeIcon.setAttribute("xmlns", "http://www.w3.org/2000/svg");
                    likeIcon.setAttribute("class", "h-4 w-4 mr-1");
                    likeIcon.setAttribute("fill", "none");
                    likeIcon.setAttribute("viewBox", "0 0 24 24");
                    likeIcon.setAttribute("stroke", "currentColor");
                    const likePath = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    likePath.setAttribute("stroke-linecap", "round");
                    likePath.setAttribute("stroke-linejoin", "round");
                    likePath.setAttribute("stroke-width", "2");
                    likePath.setAttribute("d", "M9 5l7 7-7 7");
                    likeIcon.appendChild(likePath);
                    likesDiv.appendChild(likeIcon);
                    likesDiv.appendChild(document.createTextNode(review.likes || '0'));

                    metaDiv.appendChild(dateDiv);
                    metaDiv.appendChild(likesDiv);

                    contentDiv.appendChild(textDiv);
                    contentDiv.appendChild(metaDiv);

                    reviewDiv.appendChild(contentDiv);
                    reviewsContainer.appendChild(reviewDiv);
                });
            } else {
                reviewsContainer.innerHTML = '<p class="text-sm text-gray-500">No reviews yet.</p>';
            }

            // Show the detailed view
            document.getElementById('serviceDetails').style.display = 'block';
        }

        // Function to hide service details
        document.getElementById('closeDetails').addEventListener('click', () => {
            document.getElementById('serviceDetails').style.display = 'none';
        });

        // Event listeners for service list buttons
        const serviceButtons = document.querySelectorAll('.service-button, .service-row');
        serviceButtons.forEach(button => {
            button.addEventListener('click', () => {
                const serviceId = button.getAttribute('data-id');
                showServiceDetails(serviceId);
            });
        });

        // Handle Review Submission (Example)
        document.getElementById('submitReview').addEventListener('click', () => {
            const rating = document.getElementById('reviewRating').value;
            const reviewText = document.getElementById('reviewText').value;

            if (rating === 'Select a rating' || reviewText.trim() === '') {
                alert('Please provide a rating and review text.');
                return;
            }

            // TODO: Implement AJAX request to submit the review to the server
            alert('Review submitted successfully!');

            // Reset the review form
            document.getElementById('reviewRating').value = 'Select a rating';
            document.getElementById('reviewText').value = '';
        });
    </script>
</body>
</html>
